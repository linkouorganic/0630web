<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>林口有機聯盟</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115160215-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-115160215-1');
  </script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/nav.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/shoppingCart.css">
</head>

<body onload="initialize()">
  <!--導覽列-->
  <header class="cd-auto-hide-header">
    <div class="logo">
      <a href="/">
        <img src="img/透明logo1.gif" alt="Logo">
      </a>
    </div>

    <nav class="cd-primary-nav">
      <a href="#cd-navigation" class="nav-trigger">
        <span>
          <em aria-hidden="true"></em>
          Menu
        </span>
      </a>
      <!-- .nav-trigger -->

      <ul id="cd-navigation">
        <li>
          <a href="/about">關於我們</a>
        </li>
        <li>
          <a href="/mv">聯盟故事微電影</a>
        </li>
        <li>
          <a href="/productListByPage?pageNo=1">我們的商品</a>
        </li>
        <li>
          <a href="/distributors">去哪兒買</a>
        </li>
        <li>
          <a href="/certification">認證資訊</a>
        </li>
        <li>
          <a href="/contact">聯絡我們</a>
        </li>
        <li style="display:inline-flex">
          <% if(login)
			{
				if(user.supplierid){%>
            <button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/profilesupplier'">會員專區</button>
            <%}else {%>
              <button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/profile'">會員專區</button>
              <% } %>

                <button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/logout'">登出</button>
                <% }	
			else
				{%>
                  <!--<button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/login'">登入</button>-->
                  <!---->
                  <div class="dropdown login-dropdown" style="display:inline-flex">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">登入
                      <span class="caret"></span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <a class="dropdown-item" href="/login">一般會員</a>
                      <a class="dropdown-item" href="/loginsupplier">供應商</a>
                    </div>
                  </div>
                  <!---->
                  <div class="dropdown login-dropdown" style="display:inline-flex">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">註冊
                      <span class="caret"></span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <a class="dropdown-item" href="/signup">一般會員</a>
                      <a class="dropdown-item" href="/signupsupplier">供應商</a>
                    </div>
                  </div>
                  <% }	
			%>
                    <button type="button" class="btn btn-warning m-1 btn-lg my-btn" data-toggle="modal" onclick="self.location.href='/shoppingcart'">
                      <i class="fas fa-shopping-cart fa-2x"></i>
                    </button>
        </li>
      </ul>
    </nav>
    <!-- .cd-primary-nav -->

  </header>
  <!-- .cd-auto-hide-header -->
  <div class="modal fade" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">維修</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          網站試營運，部分功能建構中。
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">關閉</button>
        </div>
      </div>
    </div>
  </div>
<!--購物車-->
<div class="container">
<form role="form" action="/shoppingAddPro" method="post">
  <form role="form" action="cartdata" method="post">
    <!--購物車清單-->
    <table class="table table-hover shoppingCart_table" id="shoppingCart_table">
      <thead>
        <tr class="shoppingCart_tablehead">
          <th scope="col" width="30%">商品名稱</th>
          <th scope="col" width="10%">重量</th>
          <th scope="col" width="20%">單價</th>
          <th scope="col" width="10%">數量</th>
          <th scope="col" width="20%">小計</th>
          <th scope="col" width="10%">刪除</th>
        </tr>
      </thead>
      <tbody id="goods">
	  
	   <input type="hidden" id="Custom_CusNo" name="Custom_CusNo" value="<%= user.id %>">
	   <input type="hidden" id="createid" name="createid" value="<%= user.Account %>">
        
     <% for(var i=0; i<cart.length; i++) {%>
        <tr>
		  <th scope="row" class="shoppingCart_pro" style="text-align:left">
			<div class="shoppingCart_propic">
			  <img src="../img/<%=shopImg[i]%>">
			</div>
			<div class="shoppingCart_proname"><%= cart[i] %></div>
			
		  </th>
          <td><input type="text"  name="shopWeight" value="<%= shopWeight[i] %>"  style="width:50px;margin-left:auto;margin-right:auto;border:1px solid #fff" readonly > </td>
		
          <td>$<input type="text"  id="shopPrice<%= i %>" name="shopPrice" value="<%= shopPrice[i] %>"  style="width:50px;margin-left:auto;margin-right:auto;border:1px solid #fff" readonly > </td>
          <td>
            
              <input type="number" class="form-control" id="amount<%= i %>" name="amount" value="<%= amount[i] %>" min="1" max="20"  style="width:50px;margin-left:auto;margin-right:auto"  onclick="addamount<%= i %>()">
            </td>
            
          <td>$<input type="text" id="tt<%= i %>" name="tt" value="<%= shopPrice[i]*amount[i]%>"  style="width:50px;margin-left:auto;margin-right:auto;border:1px solid #fff" readonly ></td>
        
		  <td>
            <a href="/del/<%= cart[i] %>">
              <button type="button" class="btn btn-success btn-xs" >
               刪除  
              </button>
            </a>
          </td>
          <input type="hidden" id="No" name="No" value="<%= i+1 %>">
	      <input type="hidden" id="ProId" name="ProId" value="<%= ProId[i] %>">
      
		</tr>
      
    
      <script> 

         function addamount<%= i %>() {
          
          //var table = document.getElementById("goods").getElementsByTagName('tr').length;
 

            //alert(table);
            document.getElementById("tt<%= i %>").value=document.getElementById("amount<%= i %>").value*document.getElementById("shopPrice<%= i %>").value;
           
            var table = document.getElementById("goods").getElementsByTagName('tr').length;
            var allprice =0;
             
           for(var i=0 ; i<table ;i++){
           // alert('i=' + j );
              allprice =  Number(allprice) + Number(document.getElementById("tt"+i).value) ;
             
            }
              document.getElementById('output').innerHTML = allprice;
        }

          function initialize(submit){
          var table = document.getElementById("goods").getElementsByTagName('tr').length;
          var allprice =0;
             
           for(var i=0 ; i<table ;i++){
              allprice =  Number(allprice) + Number(document.getElementById("tt"+i).value) ;
             
            }
           document.getElementById('output').innerHTML = allprice;

           
        }
        

          </script>



    <% } %>
    
  
  </form>
</form>
	</tbody>
	

    </table>
		<td>總價:<p id="output"> </p></td>
		<td><button type="submit" class="btn btn-primary btn-lg" style="float:right" onclick="">結帳</button></td> 
    
</div>

  

   <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
    crossorigin="anonymous"></script>
  <!--新增檔案-->
  <script src="https://maps.googleapis.com/maps/api/js?callback=myMap"></script>
  <script src="js/main.js"></script>
  <script src="js/mybootstrap.js"></script>
</body>

</html>