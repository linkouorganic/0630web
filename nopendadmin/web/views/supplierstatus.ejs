<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>林口有機聯盟</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115160215-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-115160215-1');
  </script>
  <!--新增檔案-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/nav.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/supplier.css">
  
</head>

<body>
  <!--導覽列-->
  <header class="cd-auto-hide-header">
    <div class="logo">
      <a href="/">
        <img src="img/透明logo1.gif" alt="Logo">
      </a>
    </div>

    <nav class="cd-primary-nav">
      <a href="#cd-navigation" class="nav-trigger">
        <span>
          <em aria-hidden="true"></em>
          Menu
        </span>
      </a>
      <!-- .nav-trigger -->

      <ul id="cd-navigation">
        <li>
          <a href="/about">關於我們</a>
        </li>
        <li>
          <a href="/mv">聯盟故事微電影</a>
        </li>
        <li>
          <a href="/productListByPage?pageNo=1">我們的商品</a>
        </li>
        <li>
          <a href="/distributors">去哪兒買</a>
        </li>
        <li>
          <a href="/certification">認證資訊</a>
        </li>
        <li>
          <a href="/contact">聯絡我們</a>
        </li>
        <li style="display:inline-flex">
			<% if(login)
			{
				if(user.supplierid){%>
				<button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/profilesupplier'">會員專區</button>
				<%}else {%>
				<button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/profile'">會員專區</button>
				<% } %> 
				
				<button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/logout'">登出</button>
				<% }	
			else
				{%>
						<!--<button type="button" class="btn btn-outline-secondary btn-lg m-1" onclick="self.location.href='/login'">登入</button>-->
						<!---->
						<div class="dropdown login-dropdown" style="display:inline-flex">
							<button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">登入
								<span class="caret"></span>
							</button>
							<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
								<a class="dropdown-item" href="/login">一般會員</a>
								<a class="dropdown-item" href="/loginsupplier">供應商</a>
							</div>
						</div>
						<!---->
						<div class="dropdown login-dropdown" style="display:inline-flex">
							<button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">註冊
								<span class="caret"></span>
							</button>
							<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
								<a class="dropdown-item" href="/signup">一般會員</a>
								<a class="dropdown-item" href="/signupsupplier">供應商</a>
							</div>
						</div>
						<% }	
			%>
						<button type="button" class="btn btn-warning m-1 btn-lg my-btn" data-toggle="modal" data-target="#myModal">
							<i class="fas fa-shopping-cart fa-2x"></i>
						</button>
		</li>
      </ul>
    </nav>
    <!-- .cd-primary-nav -->

  </header>
  <!-- .cd-auto-hide-header -->
  <div class="modal fade" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">維修</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          網站試營運，部分功能建構中。
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">關閉</button>
        </div>
      </div>
    </div>
  </div>

  <!--管理者介面-->
  <div class="container">
    <div class="row" style="justify-content:center;">
      <!--管理專區分類-->
      <div class="col-sm-12 col-md-3">
        <div class="card supplier-catalog">
          <div class="card-header sup-cata-title">負責人專區</div>
          <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <a class="nav-link" href="/supplier" >
              <i class="fas fa-list-alt"></i>訂單清單</a>
			<a class="nav-link" href="/supplierordedit" >
              <i class="fas fa-edit"></i>編輯訂單列表</a>
            <a class="nav-link"  href="/supplierpend" >
              <i class="fas fa-users"></i>分配訂單</a>
			<a class="nav-link"  href="/supplierpendedit" >
              <i class="fas fa-user-edit"></i>編輯分配訂單</a>
            <a class="nav-link active"  href="/supplierstatus" >
              <i class="fas fa-truck"></i>訂單狀況</a>
          </div>
        </div>
      </div>

      <!--內容-->
      <div class="col-sm-12 col-md-8">
        <div class="card">
          <div class="tab-content" id="myTabContent">
			
			
            <!--出貨/收款-->
			
            <div class="tab-pane fade show active" id="newOrder" role="tabpanel" aria-labelledby="newOrder-tab">

                              
			<% for(var order=0; order<orderData.length; order++){ %>  
				
			<div class="modal-content">
				<div class="modal-body">
					  <div class="row">
						  <form role="form" action="/supplierUpdateStatus" method="post" >	
							<div class="form-group row sup-distri-form">
							<p class="shippingID">訂單<%= orderData[order].OrdNo %>
							<% for(var pendingpro=0; pendingpro<orderdetailData.length; pendingpro++){ %>    
								<% if(orderData[order].OrdNo==orderdetailData[pendingpro].Order_OrdNo){ %>
								<input type="hidden" class="form-control" value="<%= orderData[order].OrdNo %>" name="orddetailNo" id="orddetailNo">
								<% } %> 
							<% } %> 
							
							
									<% for(var pendingstatus=0; pendingstatus<orddetailstatusData.length; pendingstatus++){ %>    
										<% if(orderData[order].OrdNo==orddetailstatusData[pendingstatus].Order_OrdNo){ %>
									<p id="shipmentbtn<%= orderData[order].OrdNo %>"><input type="hidden"  value="<%= orddetailstatusData[pendingstatus].OrdStatus.substring(0,3) %>" name='shipment'></p>
									
										<input type="button" class="btn btn-default mx-2" value="<%= orddetailstatusData[pendingstatus].OrdStatus.substring(0,3) %>" name="shipment" id="shipment<%= orderData[order].OrdNo %>">
										<% } %> 
									<% } %> 
									
									<script>
										 document.getElementById("shipment<%= orderData[order].OrdNo %>").addEventListener(
										  "click",
										  function(event) {
											if (event.target.value === "未出貨") {
											  event.target.value = "已出貨";
											  document.getElementById("shipmentbtn<%= orderData[order].OrdNo %>").innerHTML = "<input type='hidden' class='form-control' value='已出貨' name='shipment' id='shipment'>";
											} else {
											  event.target.value = "未出貨";
											  document.getElementById("shipmentbtn<%= orderData[order].OrdNo %>").innerHTML = "<input type='hidden' class='form-control' value='未出貨' name='shipment' id='shipment'>";
											}
										  },
										  false
										);
									</script>
									
		
									
									<% for(var pendingstatus=0; pendingstatus<orddetailstatusData.length; pendingstatus++){ %>    
										<% if(orderData[order].OrdNo==orddetailstatusData[pendingstatus].Order_OrdNo){ %>
									<p id="paymentbtn<%= orderData[order].OrdNo %>"><input type="hidden"  value="<%= orddetailstatusData[pendingstatus].OrdStatus.substring(3) %>" name='payment'></p>
										<input type="button" class="btn btn-default mx-2" value="<%= orddetailstatusData[pendingstatus].OrdStatus.substring(3) %>" name="payment" id="payment<%= orderData[order].OrdNo %>">
										<% } %> 
									<% } %> 
									<script>
										 document.getElementById("payment<%= orderData[order].OrdNo %>").addEventListener(
										  "click",
										  function(event) {
											if (event.target.value === "未付款") {
											  event.target.value = "已付款";
											  document.getElementById("paymentbtn<%= orderData[order].OrdNo %>").innerHTML = "<input type='hidden' class='form-control' value='已付款' name='payment' id='payment'>";
											} else {
											  event.target.value = "未付款";
											  document.getElementById("paymentbtn<%= orderData[order].OrdNo %>").innerHTML = "<input type='hidden' class='form-control' value='未付款' name='payment' id='payment'>";
											}
										  },
										  false
										);
									</script>
				
									
								</p>
								<button type="submit" class="btn btn-success btn-xs" data-dismiss="modal">確認</button>
							</div>
						  </form>
					  </div>
				</div>
			</div>
					
			<% } %> 

			
			
              
			
            </div>
			
          
        </div>
      </div>
    </div>

  </div>




  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
    crossorigin="anonymous"></script>
  <!---->
  <script src="https://cdn.rawgit.com/skipser/youtube-autoresize/master/youtube-autoresizer.js"></script>
  <!--新增input按鈕-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script src="js/main.js"></script>
  <script src="js/mybootstrap.js"></script>

</body>

</html>